function setAnnouncementBadge() { setCookie($("#hdnAnnouncementCookiesName").val(), "lastTimeStamp=", 30), $("#BadgeNotification").hide() } function setCookie(e, n, t) { var o, i, a, c = new Date; t && ((o = new Date).setTime(o.getTime() + 864e5 * t), expires = "; expires=" + o.toUTCString()), i = ("0" + (c.getMonth() + 1)).slice(-2), a = c.getFullYear() + "/" + i + "/" + ("0" + c.getDate()).slice(-2) + " " + c.getHours() + ":" + c.getMinutes() + ":" + c.getSeconds(), document.cookie = e + "=" + n + a + ";" + expires + ";path=/" } function getCookie(e) { for (var n, t = e + "=", o = document.cookie.split(";"), i = 0; i < o.length; i++) { for (n = o[i]; " " == n.charAt(0);)n = n.substring(1, n.length); if (0 == n.indexOf(t)) return n.substring(t.length, n.length) } return null } function checkAnnouncement() { var e, n = $("#hdnAnnouncementCookiesName").val(), t = $("#hdnlastAnnouncementDate").val(), o = getCookie(n); isempty(n) ? $("#BadgeNotification").hide() : isempty(t) ? $("#BadgeNotification").hide() : isempty(o) ? $("#BadgeNotification").show() : (o = o.replace("lastTimeStamp=", ""), e = new Date(t), new Date(o) >= e ? $("#BadgeNotification").hide() : $("#BadgeNotification").show()) } function isempty(e) { return !(void 0 !== e && e && 0 !== e.length && "" !== e && /[^\s]/.test(e) && !/^\s*$/.test(e) && "" !== e.replace(/\s/g, "")) } function initAutoCompleteSearchBox() { var e = {}; $("#txtSearchText").length && $("#txtSearchText").autocomplete({ source: function (n, t) { var o = $.trim(n.term), i = { searchText: o }; o in e && t($.map(e[o], function (e) { return { label: e.keyword, value: e.keyword } })), $.ajax({ async: !0, cache: !1, type: "POST", dataType: "json", url: "ajax/OnePageStructureServices.aspx/DisplayFrequentSearchedKeyword", data: JSON.stringify(i), contentType: "application/json; charset=utf-8", beforeSend: function () { $(".ajaxBusy").show() }, success: function (n) { e[o] = n.d.FrequentKeyword, t($.map(n.d.FrequentKeyword, function (e) { return { label: e.keyword, value: e.keyword } })) }, error: function (e) { console.log(e) }, complete: function () { $(".ajaxBusy").hide() } }) }, minLength: 1, delay: 300, search: function (e) { return 37 != e.keyCode && 38 != e.keyCode && 39 != e.keyCode && 40 != e.keyCode && ("chrome" == getUserAgentInfo().Type || 229 != e.keyCode) }, select: function (e, n) { $(this).val(n.item.value), function (e) { document.URL; var n, t, o = document.getElementById("hdnDupClickControl"); null != o && null != o && "undefined" != o && (null == (n = o.value) || 0 == n.length) && (t = "fulltextsearch.aspx?SearchTerm=" + encodeURI("すべて") + "&SearchText=" + encodeURI(e) + "&SearchTab=all", $("#chkAllDrugSearch").attr("checked") && (t += "&AllDrugFlag=true"), $(".searchBusy").show(), location.href = t, n.value = "1") }(n.item.value) } }).keyup(function (e) { 37 != event.keyCode && 38 != event.keyCode && 39 != event.keyCode && 40 != event.keyCode && ("chrome" == getUserAgentInfo().Type ? $(this).autocomplete("search") : (13 == event.keyCode || 32 == event.keyCode || event.keyCode >= 48 && event.keyCode <= 90 || event.keyCode >= 96 && event.keyCode <= 105) && $(this).autocomplete("search")) }).blur(function () { ("ipad" == getUserAgentInfo().Type || "iphone" == getUserAgentInfo().Type) && $(this).autocomplete("search") }) } $(document).ready(function () { $(".jpoc-nav").hide(), $("#imgAdminMenu").click(function (e) { e.preventDefault(), $(".jpoc-nav").hide(), $("#adminMenu-nav").toggle() }), $("#imgUserAccount").click(function (e) { e.preventDefault(), $(".jpoc-nav").hide(), $("#userMenu-nav").toggle() }), $("#imgNotification").click(function (e) { e.preventDefault(), $(".jpoc-nav").not("#AnnouncementMenu-nav").hide(), $("#AnnouncementMenu-nav").toggle(), setAnnouncementBadge() }), $("#imgNotification").hover(function () { var e = $("#AnnouncementMenu-nav"); $(".jpoc-nav").hide(), 0 == e.is(":visible") && ($("#AnnouncementMenu-nav").show(), setAnnouncementBadge()) }), $("#closeAnnouncement").click(function () { $("#AnnouncementMenu-nav").hide() }), $("#imgQuestion").click(function (e) { e.preventDefault(), $(".jpoc-nav").hide(), $("#welcome-nav").toggle() }), $(".jpoc-guide-popup").click(function (e) { e.preventDefault(), $("a.firstdesc").eq(0).click() }), checkAnnouncement(), $(".iframe_feedback").colorbox({ iframe: !0, width: "840px", height: "600px", maxWidth: "90%", maxHeight: "90%", returnFocus: !0, overlayClose: !1, title: "<div style='margin-bottom:0px;'><a href='javascript:void(0);' onclick='JavaScript:return sendFeedback();' alt='メール'><img src='common/images/modal_sendemail.gif' alt='送信' width='132' height='32' /></a>&nbsp;&nbsp;<a href='javascript:void(0);' onclick='JavaScript:return closeColorbox();'><img src='common/images/modal_cancel.gif' alt='キャンセル' width='132' height='32' /></a></div>", onOpen: function () { openedColorbox = $(".iframe_feedback").colorbox }, onClosed: function () { openedColorbox = null } }), $(document).mouseup(function (e) { $(e.target).closest("#imgUserAccount").length || $(e.target).closest("#userMenu-nav").length || $("#userMenu-nav").hide(), $(e.target).closest("#imgAdminMenu").length || $(e.target).closest("#adminMenu-nav").length || $("#adminMenu-nav").hide(), $(e.target).closest("#imgNotification").length || $(e.target).closest("#AnnouncementMenu-nav").length || $("#AnnouncementMenu-nav").hide(), $(e.target).closest("#imgQuestion").length || $(e.target).closest("#welcome-nav").length || $("#welcome-nav").hide() }), initAutoCompleteSearchBox() });
$(document).ready(function () {
    if (document.getElementById('NavLinkShare')) {
        $("#BadgeNotification").css("left", "40px");
    }
});